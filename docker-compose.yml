version: '2'
services:
  editor:
    image: swisstopo/service-maputnik-editor:latest
    build: ./apps/editor
    ports:
      - "8011:8011"
    command: npm start -- --host 0.0.0.0 --port 8011
  gatekeeper:
    image: swisstopo/service-maputnik-gatekeeper:latest
    build: 
      context: ./apps/gatekeeper
    environment:
      OAUTH_CLIENT_ID: "${GK_OAUTH_CLIENT_ID}"
      OAUTH_CLIENT_SECRET: "${GK_OAUTH_CLIENT_SECRET}"
    ports:
      - "8010:8010"
    command: sh -c "node index.js"
